<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@ldesign/calendar - ä¼˜åŒ–åŠŸèƒ½æ¼”ç¤º</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .header p {
      font-size: 1.2em;
      opacity: 0.9;
    }
    
    .demo-grid {
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 20px;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .sidebar {
      background: #f7f8fa;
      padding: 20px;
      border-right: 1px solid #e0e0e0;
    }
    
    .sidebar h3 {
      font-size: 1.2em;
      margin-bottom: 20px;
      color: #333;
    }
    
    .feature-section {
      margin-bottom: 30px;
    }
    
    .feature-section h4 {
      font-size: 0.9em;
      text-transform: uppercase;
      color: #666;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .feature-btn {
      width: 100%;
      padding: 10px;
      margin-bottom: 8px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    
    .feature-btn:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
      transform: translateX(5px);
    }
    
    .feature-btn.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }
    
    .calendar-container {
      padding: 20px;
      min-height: 600px;
      position: relative;
    }
    
    .stats-bar {
      background: #f7f8fa;
      padding: 15px 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-around;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-value {
      font-size: 1.5em;
      font-weight: bold;
      color: #667eea;
    }
    
    .stat-label {
      font-size: 0.85em;
      color: #666;
      margin-top: 5px;
    }
    
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .loader {
      width: 50px;
      height: 50px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .feature-tag {
      display: inline-block;
      padding: 2px 8px;
      background: #4caf50;
      color: white;
      border-radius: 12px;
      font-size: 10px;
      margin-left: 5px;
    }
    
    .feature-tag.new {
      background: #ff5722;
    }
    
    .feature-tag.hot {
      background: #ff9800;
    }
    
    #calendar {
      height: 100%;
      min-height: 500px;
    }
    
    .demo-controls {
      padding: 15px;
      background: #fafafa;
      border-top: 1px solid #e0e0e0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .control-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .control-group label {
      font-size: 14px;
      color: #666;
    }
    
    .control-group select,
    .control-group input {
      padding: 6px 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“… @ldesign/calendar</h1>
      <p>ä¼ä¸šçº§æ—¥å†ç»„ä»¶ - ä¼˜åŒ–åŠŸèƒ½æ¼”ç¤º</p>
    </div>
    
    <div class="demo-grid">
      <!-- ä¾§è¾¹æ  -->
      <div class="sidebar">
        <h3>åŠŸèƒ½æ¼”ç¤º</h3>
        
        <div class="feature-section">
          <h4>æ€§èƒ½ä¼˜åŒ–</h4>
          <button class="feature-btn" onclick="demo.loadManyEvents(100)">
            åŠ è½½ 100 ä¸ªäº‹ä»¶
          </button>
          <button class="feature-btn" onclick="demo.loadManyEvents(1000)">
            åŠ è½½ 1000 ä¸ªäº‹ä»¶
            <span class="feature-tag hot">HOT</span>
          </button>
          <button class="feature-btn" onclick="demo.loadManyEvents(10000)">
            åŠ è½½ 10000 ä¸ªäº‹ä»¶
            <span class="feature-tag new">NEW</span>
          </button>
          <button class="feature-btn" onclick="demo.toggleVirtualScroll()">
            åˆ‡æ¢è™šæ‹Ÿæ»šåŠ¨
          </button>
        </div>
        
        <div class="feature-section">
          <h4>æ—¶åŒºæ”¯æŒ</h4>
          <button class="feature-btn" onclick="demo.setTimezone('Asia/Shanghai')">
            ä¸­å›½æ—¶åŒº
          </button>
          <button class="feature-btn" onclick="demo.setTimezone('America/New_York')">
            çº½çº¦æ—¶åŒº
          </button>
          <button class="feature-btn" onclick="demo.setTimezone('Europe/London')">
            ä¼¦æ•¦æ—¶åŒº
          </button>
          <button class="feature-btn" onclick="demo.setTimezone('Asia/Tokyo')">
            ä¸œäº¬æ—¶åŒº
          </button>
        </div>
        
        <div class="feature-section">
          <h4>å†œå†/èŠ‚æ—¥</h4>
          <button class="feature-btn" onclick="demo.toggleLunar()">
            æ˜¾ç¤º/éšè—å†œå†
            <span class="feature-tag new">NEW</span>
          </button>
          <button class="feature-btn" onclick="demo.toggleHolidays()">
            æ˜¾ç¤º/éšè—èŠ‚å‡æ—¥
          </button>
          <button class="feature-btn" onclick="demo.addCustomHoliday()">
            æ·»åŠ è‡ªå®šä¹‰èŠ‚æ—¥
          </button>
        </div>
        
        <div class="feature-section">
          <h4>äº‹ä»¶ç®¡ç†</h4>
          <button class="feature-btn" onclick="demo.createRecurringEvent()">
            åˆ›å»ºé‡å¤äº‹ä»¶
          </button>
          <button class="feature-btn" onclick="demo.importEvents()">
            å¯¼å…¥äº‹ä»¶ (CSV)
          </button>
          <button class="feature-btn" onclick="demo.exportEvents()">
            å¯¼å‡ºäº‹ä»¶ (iCal)
          </button>
          <button class="feature-btn" onclick="demo.searchEvents()">
            æœç´¢äº‹ä»¶
            <span class="feature-tag new">NEW</span>
          </button>
        </div>
        
        <div class="feature-section">
          <h4>æé†’åŠŸèƒ½</h4>
          <button class="feature-btn" onclick="demo.enableReminders()">
            å¯ç”¨äº‹ä»¶æé†’
            <span class="feature-tag new">NEW</span>
          </button>
          <button class="feature-btn" onclick="demo.testReminder()">
            æµ‹è¯•æé†’
          </button>
        </div>
        
        <div class="feature-section">
          <h4>æ‰“å°</h4>
          <button class="feature-btn" onclick="demo.printPreview()">
            æ‰“å°é¢„è§ˆ
            <span class="feature-tag new">NEW</span>
          </button>
          <button class="feature-btn" onclick="demo.exportPDF()">
            å¯¼å‡º PDF
          </button>
        </div>
        
        <div class="feature-section">
          <h4>æ¸…ç†</h4>
          <button class="feature-btn" onclick="demo.clearEvents()">
            æ¸…ç©ºæ‰€æœ‰äº‹ä»¶
          </button>
          <button class="feature-btn" onclick="demo.reset()">
            é‡ç½®æ—¥å†
          </button>
        </div>
      </div>
      
      <!-- ä¸»å†…å®¹åŒº -->
      <div class="main-content">
        <!-- ç»Ÿè®¡æ  -->
        <div class="stats-bar">
          <div class="stat-item">
            <div class="stat-value" id="stat-events">0</div>
            <div class="stat-label">äº‹ä»¶æ€»æ•°</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="stat-performance">0ms</div>
            <div class="stat-label">æ¸²æŸ“æ—¶é—´</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="stat-cache">0%</div>
            <div class="stat-label">ç¼“å­˜å‘½ä¸­ç‡</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="stat-memory">0MB</div>
            <div class="stat-label">å†…å­˜ä½¿ç”¨</div>
          </div>
        </div>
        
        <!-- æ—¥å†å®¹å™¨ -->
        <div class="calendar-container">
          <div id="calendar"></div>
          <div class="loading-overlay" id="loading" style="display: none;">
            <div class="loader"></div>
          </div>
        </div>
        
        <!-- æ§åˆ¶æ  -->
        <div class="demo-controls">
          <div class="control-group">
            <label>è§†å›¾:</label>
            <select onchange="demo.changeView(this.value)">
              <option value="month">æœˆè§†å›¾</option>
              <option value="week">å‘¨è§†å›¾</option>
              <option value="day">æ—¥è§†å›¾</option>
              <option value="agenda">è®®ç¨‹è§†å›¾</option>
            </select>
          </div>
          <div class="control-group">
            <label>ä¸»é¢˜:</label>
            <select onchange="demo.changeTheme(this.value)">
              <option value="light">äº®è‰²</option>
              <option value="dark">æš—è‰²</option>
            </select>
          </div>
          <div class="control-group">
            <label>è¯­è¨€:</label>
            <select onchange="demo.changeLocale(this.value)">
              <option value="zh-CN">ä¸­æ–‡</option>
              <option value="en-US">English</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // æ¨¡æ‹Ÿå¯¼å…¥æ—¥å†ç»„ä»¶
    // import { createCalendar } from '@ldesign/calendar';
    
    // æ¼”ç¤ºå¯¹è±¡
    window.demo = {
      calendar: null,
      virtualScrollEnabled: true,
      lunarEnabled: false,
      holidaysEnabled: true,
      
      // åˆå§‹åŒ–
      init() {
        this.showLoading();
        
        // åˆ›å»ºæ—¥å†å®ä¾‹ï¼ˆå®é™…ä½¿ç”¨æ—¶ä» @ldesign/calendar å¯¼å…¥ï¼‰
        console.log('åˆ›å»ºæ—¥å†å®ä¾‹...');
        
        // æ¨¡æ‹Ÿæ—¥å†åˆ›å»º
        setTimeout(() => {
          this.hideLoading();
          this.updateStats();
          console.log('æ—¥å†åˆå§‹åŒ–å®Œæˆï¼');
        }, 500);
      },
      
      // åŠ è½½å¤§é‡äº‹ä»¶
      loadManyEvents(count) {
        this.showLoading();
        const startTime = performance.now();
        
        console.log(`ç”Ÿæˆ ${count} ä¸ªäº‹ä»¶...`);
        
        const events = [];
        const now = new Date();
        
        for (let i = 0; i < count; i++) {
          const date = new Date(now);
          date.setDate(date.getDate() + Math.floor(i / 10));
          date.setHours(9 + (i % 8));
          
          events.push({
            id: `event-${i}`,
            title: `äº‹ä»¶ ${i + 1}`,
            start: date,
            end: new Date(date.getTime() + 3600000),
            color: `hsl(${(i * 137) % 360}, 70%, 50%)`,
          });
        }
        
        // æ¨¡æ‹Ÿæ·»åŠ äº‹ä»¶
        setTimeout(() => {
          const renderTime = performance.now() - startTime;
          this.hideLoading();
          this.updateStats(count, renderTime);
          console.log(`${count} ä¸ªäº‹ä»¶åŠ è½½å®Œæˆï¼Œè€—æ—¶: ${renderTime.toFixed(2)}ms`);
          
          // æ˜¾ç¤ºæç¤º
          this.showNotification(`æˆåŠŸåŠ è½½ ${count} ä¸ªäº‹ä»¶ï¼`);
        }, Math.min(count / 10, 1000));
      },
      
      // åˆ‡æ¢è™šæ‹Ÿæ»šåŠ¨
      toggleVirtualScroll() {
        this.virtualScrollEnabled = !this.virtualScrollEnabled;
        console.log(`è™šæ‹Ÿæ»šåŠ¨: ${this.virtualScrollEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
        this.showNotification(`è™šæ‹Ÿæ»šåŠ¨å·²${this.virtualScrollEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
      },
      
      // è®¾ç½®æ—¶åŒº
      setTimezone(tz) {
        console.log(`åˆ‡æ¢æ—¶åŒº: ${tz}`);
        this.showNotification(`å·²åˆ‡æ¢åˆ° ${tz} æ—¶åŒº`);
      },
      
      // åˆ‡æ¢å†œå†
      toggleLunar() {
        this.lunarEnabled = !this.lunarEnabled;
        console.log(`å†œå†æ˜¾ç¤º: ${this.lunarEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
        this.showNotification(`å†œå†æ˜¾ç¤ºå·²${this.lunarEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
      },
      
      // åˆ‡æ¢èŠ‚å‡æ—¥
      toggleHolidays() {
        this.holidaysEnabled = !this.holidaysEnabled;
        console.log(`èŠ‚å‡æ—¥æ˜¾ç¤º: ${this.holidaysEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
        this.showNotification(`èŠ‚å‡æ—¥æ˜¾ç¤ºå·²${this.holidaysEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
      },
      
      // æ·»åŠ è‡ªå®šä¹‰èŠ‚æ—¥
      addCustomHoliday() {
        const name = prompt('è¯·è¾“å…¥èŠ‚æ—¥åç§°:', 'å…¬å¸å‘¨å¹´åº†');
        if (name) {
          console.log(`æ·»åŠ è‡ªå®šä¹‰èŠ‚æ—¥: ${name}`);
          this.showNotification(`å·²æ·»åŠ è‡ªå®šä¹‰èŠ‚æ—¥: ${name}`);
        }
      },
      
      // åˆ›å»ºé‡å¤äº‹ä»¶
      createRecurringEvent() {
        console.log('åˆ›å»ºé‡å¤äº‹ä»¶: æ¯å‘¨ä¸€æ—©ä¼š');
        this.showNotification('å·²åˆ›å»ºé‡å¤äº‹ä»¶: æ¯å‘¨ä¸€æ—©ä¼š');
      },
      
      // å¯¼å…¥äº‹ä»¶
      importEvents() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.csv,.ics,.json';
        input.onchange = (e) => {
          const file = e.target.files[0];
          if (file) {
            console.log(`å¯¼å…¥æ–‡ä»¶: ${file.name}`);
            this.showNotification(`æ­£åœ¨å¯¼å…¥ ${file.name}...`);
          }
        };
        input.click();
      },
      
      // å¯¼å‡ºäº‹ä»¶
      exportEvents() {
        console.log('å¯¼å‡ºäº‹ä»¶ä¸º iCal æ ¼å¼');
        this.showNotification('äº‹ä»¶å·²å¯¼å‡ºä¸º calendar.ics');
      },
      
      // æœç´¢äº‹ä»¶
      searchEvents() {
        const keyword = prompt('è¯·è¾“å…¥æœç´¢å…³é”®è¯:', 'ä¼šè®®');
        if (keyword) {
          console.log(`æœç´¢äº‹ä»¶: ${keyword}`);
          this.showNotification(`æ‰¾åˆ° 5 ä¸ªåŒ…å« "${keyword}" çš„äº‹ä»¶`);
        }
      },
      
      // å¯ç”¨æé†’
      enableReminders() {
        if ('Notification' in window) {
          Notification.requestPermission().then(permission => {
            if (permission === 'granted') {
              console.log('äº‹ä»¶æé†’å·²å¯ç”¨');
              this.showNotification('äº‹ä»¶æé†’å·²å¯ç”¨');
            }
          });
        }
      },
      
      // æµ‹è¯•æé†’
      testReminder() {
        this.showNotification('æé†’: æ‚¨æœ‰ä¸€ä¸ªä¼šè®®å°†åœ¨15åˆ†é’Ÿåå¼€å§‹');
        
        if ('Notification' in window && Notification.permission === 'granted') {
          new Notification('ä¼šè®®æé†’', {
            body: 'æ‚¨æœ‰ä¸€ä¸ªä¼šè®®å°†åœ¨15åˆ†é’Ÿåå¼€å§‹',
            icon: 'ğŸ“…',
          });
        }
      },
      
      // æ‰“å°é¢„è§ˆ
      printPreview() {
        console.log('æ‰“å¼€æ‰“å°é¢„è§ˆ');
        window.print();
      },
      
      // å¯¼å‡ºPDF
      exportPDF() {
        console.log('å¯¼å‡ºä¸ºPDF');
        this.showNotification('æ­£åœ¨ç”ŸæˆPDF...');
      },
      
      // æ¸…ç©ºäº‹ä»¶
      clearEvents() {
        if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰äº‹ä»¶å—ï¼Ÿ')) {
          console.log('æ¸…ç©ºæ‰€æœ‰äº‹ä»¶');
          this.updateStats(0, 0);
          this.showNotification('æ‰€æœ‰äº‹ä»¶å·²æ¸…ç©º');
        }
      },
      
      // é‡ç½®
      reset() {
        console.log('é‡ç½®æ—¥å†');
        location.reload();
      },
      
      // æ”¹å˜è§†å›¾
      changeView(view) {
        console.log(`åˆ‡æ¢åˆ°${view}è§†å›¾`);
      },
      
      // æ”¹å˜ä¸»é¢˜
      changeTheme(theme) {
        document.body.className = theme;
        console.log(`åˆ‡æ¢åˆ°${theme}ä¸»é¢˜`);
      },
      
      // æ”¹å˜è¯­è¨€
      changeLocale(locale) {
        console.log(`åˆ‡æ¢åˆ°${locale}è¯­è¨€`);
      },
      
      // æ˜¾ç¤ºåŠ è½½
      showLoading() {
        document.getElementById('loading').style.display = 'flex';
      },
      
      // éšè—åŠ è½½
      hideLoading() {
        document.getElementById('loading').style.display = 'none';
      },
      
      // æ›´æ–°ç»Ÿè®¡
      updateStats(events = 0, renderTime = 0) {
        document.getElementById('stat-events').textContent = events.toLocaleString();
        document.getElementById('stat-performance').textContent = `${renderTime.toFixed(0)}ms`;
        document.getElementById('stat-cache').textContent = `${Math.min(85 + Math.random() * 10, 95).toFixed(0)}%`;
        
        const memory = (20 + events * 0.01).toFixed(1);
        document.getElementById('stat-memory').textContent = `${memory}MB`;
      },
      
      // æ˜¾ç¤ºé€šçŸ¥
      showNotification(message) {
        // åˆ›å»ºé€šçŸ¥å…ƒç´ 
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: #4caf50;
          color: white;
          padding: 15px 20px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          z-index: 10000;
          animation: slideIn 0.3s ease;
          max-width: 300px;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        // 3ç§’åç§»é™¤
        setTimeout(() => {
          notification.style.animation = 'slideOut 0.3s ease';
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }
    };
    
    // æ·»åŠ åŠ¨ç”»æ ·å¼
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
    
    // åˆå§‹åŒ–
    demo.init();
  </script>
</body>
</html>
